<!DOCTYPE html>
<html>
    <head>
        <title>Splunk Tracing - Simple Browser Example</title>
        <style>
            .main {
                max-width : 720px;
                margin    : 32px auto;
            }
            textarea {
                width      : 100%;
                min-height : 40em;
            }
        </style>
    </head>
    <body>
        <div class="main">
            <h1>Splunk Tracing: Trivial Browser Example</h1>
            <h3>Results</h3>
            <div id="trace-link-div" style="opacity : 0">
                <a id="trace-link" href="" target="_blank">Link to trace on Splunk</a>
            </div>
            <textarea id='results'></textarea>
        </div>
        <!--
            Include the standard OpenTracing APIs and the Splunk Tracing bindings.
        -->
        <script type="text/javascript" src="opentracing-browser.min.js"></script>
        <script type="text/javascript" src="splunk-tracer.min.js"
            data-init_global_tracer="true"
            data-access_token="08243c00-a31b-499d-9fae-776b41990997"
            data-component_name="splunk-tracer/examples/browser-trivial"
            data-xhr_instrumentation="true"
            data-collector_encryption="true"
        ></script>

        <!--
            Add a quick example script using OpenTracing and Splunk Tracing
        -->
        <script type="text/javascript">
        <!--

        var span = opentracing.globalTracer(disable_clock_skew_correction="true").startSpan('trivial_span');
        setTimeout(function() {
            span.log({ event : 'log_event' });
        }, 100);
        setTimeout(function() {
            span.finish();

            // Update the page
            var results = document.getElementById('results');
            var linkDiv = document.getElementById('trace-link-div');
            var link = document.getElementById('trace-link');
            results.value = 'Span finished.'
            var url = span.generateTraceURL();
            link.href = url;
            linkDiv.style.opacity = 1.0;
        }, 200);
        -->
        </script>
    </body>
</html>
